<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce | Home</title>
    <link rel="stylesheet" href="style.css">
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

</head>
<body>
 <section id="header">
  <h1 id="logo" alt="">E-COMMERCE</h1>
 

  <div id="mobile">
  <i id="bar" class="fas fa-bars"></i>
</div>
   <ul id="navbar">
   <i  class="fas fa-times" id="close" aria-hidden="true"></i>
   <li><a class="" href="index.html">Home</a></li>
   <li><a class="" href="shop.html">Shop</a></li>
   <li><a class="" href="blog.html">Blog</a></li>
   <li><a class="" href="about.html">About</a></li>
   <li><a class="" href="contact.html">Contack</a></li>
   <li><a class="active" href="cart.html"><i class="fa fa-shopping-bag shoppingbag"></i></a></li>
 </ul>
</section>

  <section id="cart-hero">
    <div class="overlay">
      <h1>Your Products</h1>
      <p>Calculate the price</p>
    </div>
  </section>
<section id="cart1">
<table id="cart-table">
  <thead>
    <tr>
      <td>Remove</td>
      <td>Image</td>
      <td>Product</td>
      <td>Size</td>
      <td>Price</td>
      <td>Qty</td>
      <td>Subtotal</td>
    </tr>
  </thead>

  <tbody id="cart-items"></tbody>
</table>
<br>
<div class="checkout-box">

  <!-- Coupon Section -->
  <div class="coupon-box">
    <h4>Apply Coupon</h4>

    <label class="radio-card">
      <input type="checkbox" name="coupon" id="coupon50">
      <span>
        <strong>WELCOME50</strong>
        <small>Save $50 on this order</small>
      </span>
    </label>
  </div>

  <!-- Payment Section -->
  <div class="payment-box">
    <h4>Payment Method</h4>

    <label class="radio-card">
      <input type="radio" name="payment" checked>
      <span>üíµ Cash on Delivery</span>
    </label>

    <label class="radio-card">
      <input type="radio" name="payment">
      <span>üí≥ Online Payment</span>
    </label>
  </div>

  <!-- Total -->
  <div class="total-box">
  <p>Items Subtotal: <span id="itemsSubtotal">$0.00</span></p>
  <p>Handling Fee: <span id="handlingFee">$10.00</span></p>
  <p>Delivery Fee: <span id="deliveryFee">$10.00</span></p>
  <hr>

  <p>Subtotal (Before Discount): <span id="orderSubtotal">$0.00</span></p>
  <p>TAX (GST): <span id="taxAmount">$0.00</span></p>
  <p class="discount">Discount: <span id="discountAmount">-$0.00</span></p>
  <hr>

  <h3>Grand Total: <span id="cart-total">$0.00</span></h3>

  <button class="buy-btn" onclick="placeOrder()">Buy Now</button>
</div>

</section>

<section>
  <footer id="footer" class="section-p1">
    <div class="col">
    <img src="img/logo.jpg" alt="">
    <h3>Contact</h3>
       <p><strong>Address:</strong>562 wellington road,street 32,san francisco</p>
       <p><strong>Phone:</strong>+01 2222 365 /(+91) 01 2345 6789</p>
    <p><strong>Hours:</strong>10:00 - 18:00, Mon - Sat</p>
    <div class="follow">
      <h3>Follow us</h3>
      <div class="icon">
        <i class="fab fa-facebook-f"></i>
         <i class="fab fa-twitter"></i>
          <i class="fab fa-instagram"></i>
           <i class="fab fa-pinterest-p"></i>
            <i class="fab fa-youtube"></i>
      </div>
     </div>
    </div>
     
    <div class="col">
      <h3>About</h3>
      <a href="#">About us</a>
      <a href="#">Delivery Information</a>
      <a href="#">Privacy & Policy</a>
      <a href="#">Terms & Conditions</a>
      <a href="#">Contact us</a>
    </div>
         
    <div class="col">
      <h3>My Account</h3>
      <a href="#">Sign in</a>
      <a href="#">View cart</a>
      <a href="#">My WishList</a>
      <a href="#">Track My Order</a>
      <a href="#">Help</a>
    </div>
    <div class="col install">
    <h3>Install App</h3>
    <p>From App Store Or Google Play</p>
    <div class="row">
      <img  src="img/App.png">
      <img src="img/App2.png">
    </div>
    <p>Secured Payment GateWays</p>
    <div clas="sponcered">
    <img id="GateWays" src="img/gw1.png">
    <img id="GateWays" src="img/gw2.jpg" alt="not found">
    <img id="GateWays" src="img/gw3.jpg">
    <img id="GateWays" src="img/gw4.jpg">
    <img id="GateWays" src="img/gw5.jpg"></div> </div>
    <div class="copyright">
      <p>@ 2021 , Tech2 etc - HTML CSS Ecommerce Template</p>
    </div>
   
  </footer>

  </section>
<script src="script.js"></script>

<script>

/* ===============================
   CONFIG
================================ */
const HANDLING_FEE = 10;
const DELIVERY_FEE = 10;
const TAX_RATE = 0.05;       // 5% GST
const COUPON_DISCOUNT = 50;

/* ===============================
   DOM ELEMENTS
================================ */
const cartTable = document.getElementById("cart-items");
const coupon = document.getElementById("coupon50");

const itemsSubtotalEl = document.getElementById("itemsSubtotal");
const orderSubtotalEl = document.getElementById("orderSubtotal");
const taxAmountEl = document.getElementById("taxAmount");
const discountEl = document.getElementById("discountAmount");
const cartTotalEl = document.getElementById("cart-total");

/* ===============================
   LOAD CART
================================ */
let cart = JSON.parse(localStorage.getItem("cart")) || [];

/* ===============================
   RENDER CART TABLE
================================ */
function renderCartTable() {
  cartTable.innerHTML = "";

  cart.forEach((item, index) => {
    const price = Number(item.price);
    const qty = Number(item.qty);
    const subtotal = price * qty;

    cartTable.innerHTML += `
      <tr>
        <td>
          <button onclick="removeItem(${index})">‚ùå</button>
        </td>
        <td>
          <img src="${item.image}" width="60">
        </td>
        <td>${item.name}</td>
        <td>${item.size}</td>
        <td>$${price.toFixed(2)}</td>
        <td>
          <input 
            type="number"
            min="1"
            value="${qty}"
            onchange="updateQty(${index}, this.value)"
          >
        </td>
        <td>$${subtotal.toFixed(2)}</td>
      </tr>
    `;
  });
}

/* ===============================
   TOTAL CALCULATION
================================ */
function calculateTotals() {
  let itemsSubtotal = 0;

  cart.forEach(item => {
    itemsSubtotal += item.price * item.qty;
  });

  // Items subtotal
  itemsSubtotalEl.innerText = `$${itemsSubtotal.toFixed(2)}`;

  // Subtotal before discount
  const subtotal = itemsSubtotal + HANDLING_FEE + DELIVERY_FEE;
  orderSubtotalEl.innerText = `$${subtotal.toFixed(2)}`;

  // Tax
  const tax = subtotal * TAX_RATE;
  taxAmountEl.innerText = `$${tax.toFixed(2)}`;

  // Discount
  const discount = coupon.checked ? COUPON_DISCOUNT : 0;
  discountEl.innerText = `-$${discount.toFixed(2)}`;

  // Grand total
  let grandTotal = subtotal + tax - discount;
  if (grandTotal < 0) grandTotal = 0;

  cartTotalEl.innerText = `$${grandTotal.toFixed(2)}`;
}

/* ===============================
   UPDATE QTY
================================ */
function updateQty(index, newQty) {
  cart[index].qty = Number(newQty);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

/* ===============================
   REMOVE ITEM
================================ */
function removeItem(index) {
  cart.splice(index, 1);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

/* ===============================
   RENDER EVERYTHING
================================ */
function renderCart() {
  renderCartTable();
  calculateTotals();
}

/* ===============================
   EVENTS
================================ */
coupon.addEventListener("change", renderCart);

/* ===============================
   INIT
================================ */
renderCart();


function placeOrder() {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];

  if (cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }

  const paymentMethod = document.querySelector(
    'input[name="payment"]:checked'
  ).value;

  const grandTotal = document.getElementById("cart-total").innerText;

  if (paymentMethod === "cod") {
    handleCOD(grandTotal);
  } else {
    handleOnlinePayment(grandTotal);
  }
}

/* ===============================
   CASH ON DELIVERY
================================ */
function handleCOD(amount) {
  alert(`‚úÖ Order placed successfully!\nPayment Mode: Cash on Delivery\nAmount: ${amount}`);

  localStorage.removeItem("cart");
  window.location.href = "success.html"; // optional
}

/* ===============================
   ONLINE PAYMENT (DEMO)
================================ */
function handleOnlinePayment(amount) {
  // STEP 1: Confirm
  const confirmPay = confirm(
    `You will be redirected for online payment.\nAmount: ${amount}`
  );

  if (!confirmPay) return;

  // STEP 2: Simulate gateway delay
  setTimeout(() => {
    alert(`üí≥ Payment Successful!\nPaid Amount: ${amount}`);

    // STEP 3: Clear cart
    localStorage.removeItem("cart");

    // STEP 4: Redirect
    window.location.href = "success.html"; // optional
  }, 1500);
}



</script>
</body>
</html>